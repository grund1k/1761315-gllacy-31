const feedbackForm=document.querySelector(".btn-feedback-form"),modalFeedback=document.querySelector(".modal-feedback"),modalFeedbackOverlay=document.querySelector(".feedback-overlay"),modalFeedbackClose=document.querySelector(".popup-close"),modalForm=modalFeedback.querySelector(".popup-feeadback-form"),userName=modalFeedback.querySelector(".user-name"),userEmail=modalFeedback.querySelector(".user-email"),userMessage=modalFeedback.querySelector(".feedback-textarea");let isStorageSupport=!0,userNameStorage="",userEmailStorage="";try{userNameStorage=localStorage.getItem("userName"),userEmailStorage=localStorage.getItem("userEmail")}catch(e){isStorageSupport=!1}feedbackForm.addEventListener("click",function(e){e.preventDefault(),modalFeedbackOverlay.classList.add("feedback-overlay-show"),modalFeedback.classList.add("modal-feedback-show"),userNameStorage&&(userName.value=userNameStorage,userEmail.focus()),userEmailStorage&&(userEmail.value=userEmailStorage,userMessage.focus()),userName.focus()}),modalFeedbackClose.addEventListener("click",function(e){e.preventDefault(),modalFeedbackOverlay.classList.remove("feedback-overlay-show"),modalFeedback.classList.remove("modal-feedback-show"),modalFeedback.classList.remove("modal-error")}),modalForm.addEventListener("submit",function(e){userName.value&&userEmail.value&&userMessage.value?isStorageSupport&&(localStorage.setItem("userName",userName.value),localStorage.setItem("userEmail",userEmail.value)):(e.preventDefault(),modalFeedback.classList.remove("modal-error"),modalFeedback.offsetWidth=modalFeedback.offsetWidth,modalFeedback.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){"Esc"!==e.key&&"Escape"!==e.key||modalFeedback.classList.contains("modal-feedback-show")&&(e.preventDefault(),modalFeedback.classList.remove("modal-feedback-show"),modalFeedbackOverlay.classList.remove("feedback-overlay-show"),modalFeedback.classList.remove("modal-error"))});
